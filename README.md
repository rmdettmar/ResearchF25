# ResearchF25

A modification of the [Pro-V project](https://github.com/stable-lab/Pro-V/tree/main) developed as a research project in the fall of 2025. 

Entrypoint is **src/prompting_top_agent_stage2.py**. Run from the top-level directory as python module:

```
python -m src.prompting_top_module_stage2
```
The dataset is included in **verilog-eval/dataset_spec-to-rtl**, and a tool is included which uses an LLM agent to generate several Verilog mutants of the dataset modules in **verilog-eval/dataset_code_testing/prompting_mutants.py**. Run from the top-level directory as python module:

```
python -m verilog-eval.dataset_code_testing.prompting_mutants
```

Run settings should be set in **args_dict** in each of the python files listed above. Some important settings to note:
-model: The name of the LLM model to be used. A list of models for which token counts are known is included in **src/token_counter.py**.
+task_numbers: A list of the dataset tasks to be used. This should be a list of any number of integers 1-156.
+key_cfg_path: A path to a .cfg file which includes the API key necessary for the model selected.
+day: The day is used to name the folder into which generated files will be placed.

Settings which exist only in **prompting_top_agent_stage2.py**:
-stage: Should be 1 or 2; selecting stage 1 will run all parts of the file, while selecting stage 2 will skip scenario and stimulus generation.
+spec_filetype: Should be "txt" or "png". Selects the format of the filetype to be fed to the LLM. Note that selecting png will result in heavier token usage.

The simulator may be used to compare generated testbenches against the golden model included with the dataset. The entrypoint is **sim/run.py** and should be run from the /sim/ folder as a python script:

```
python run.py
```

+dut_dir and mutant_dir must be changed to point to the folders in which the testbench under consideration and the mutant verilog examples, respectively, exist.
-dut_num_list should be a list of the task numbers (1-156, as above) which should be simulated. 
-mutants should be a count of the total number of simulations to run per task, including the golden model, which should be top_0.v. All others should be named in the format top_{i}.v, as is how they are generated by prompting_mutants.py.

The output of the simulator will be summarized in **sim/summary.txt**.


